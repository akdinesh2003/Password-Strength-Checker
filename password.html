<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Strength Checker</title>
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiUGFzc3dvcmQgU3RyZW5ndGggQ2hlY2tlciIsInNob3J0X25hbWUiOiJQYXNzQ2hlY2tlciIsImRlc2NyaXB0aW9uIjoiQWR2YW5jZWQgcGFzc3dvcmQgc3RyZW5ndGggY2hlY2tlciB3aXRoIGFuYWx5dGljcyIsInN0YXJ0X3VybCI6Ii4vIiwiZGlzcGxheSI6InN0YW5kYWxvbmUiLCJiYWNrZ3JvdW5kX2NvbG9yIjoiIzY2N2VlYSIsInRoZW1lX2NvbG9yIjoiIzc2NGJhMiIsImljb25zIjpbeyJzcmMiOiJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSXpNakFpSUdobGFXZG9kRDBpTXpJd0lpQjJhV1YzUW05NFBTSXdJREFnTXpJd0lETXlNQ0lnWm1sc2JEMGlJell5TnpkbFpXRWlQanh5WldOMElIZzlJakV3TUNJZ2VUMGlNVEF3SWlCM2FXUjBhRDBpTXpBd0lpQm9aV2xuYUhROUlqRXdNQ0lnY25nOUlqRTFJaUJtYVd4c1BTSWpOelkwWW1FeUlpOCtQQzl6ZG1jKyIsInNpemVzIjoiMzIweDMyMCIsInR5cGUiOiJpbWFnZS9zdmcreG1sIn1dfQ==">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
    <style>
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .pulse { animation: pulse 2s infinite; }
        .shake { animation: shake 0.5s ease-in-out; }
        .bounce { animation: bounce 0.6s ease-in-out; }
        .slide-in { animation: slideIn 0.3s ease-out; }
        .fade-in { animation: fadeIn 0.5s ease-out; }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .dark .gradient-bg {
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
        }
        .strength-bar {
            transition: all 0.3s ease;
            border-radius: 10px;
        }
        .modal-overlay {
            backdrop-filter: blur(5px);
        }
        .chart-container {
            position: relative;
            height: 200px;
        }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            max-width: 300px;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen flex items-center justify-center p-4 transition-colors duration-300">
    <!-- Language Selector & Theme Toggle -->
    <div class="fixed top-4 right-4 flex space-x-2 z-50">
        <select id="languageSelect" class="bg-white dark:bg-gray-800 text-gray-800 dark:text-white border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 text-sm">
            <option value="en">üá∫üá∏ English</option>
            <option value="es">üá™üá∏ Espa√±ol</option>
            <option value="fr">üá´üá∑ Fran√ßais</option>
            <option value="de">üá©üá™ Deutsch</option>
        </select>
        <button id="themeToggle" class="bg-white dark:bg-gray-800 text-gray-800 dark:text-white border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
            üåô
        </button>
        <button id="analyticsBtn" class="bg-purple-500 text-white rounded-lg px-3 py-1 text-sm hover:bg-purple-600 transition-colors">
            üìä
        </button>
        <button id="settingsBtn" class="bg-gray-500 text-white rounded-lg px-3 py-1 text-sm hover:bg-gray-600 transition-colors">
            ‚öôÔ∏è
        </button>
    </div>

    <!-- Notification Area -->
    <div id="notificationArea"></div>

    <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8 w-full max-w-md transform hover:scale-105 transition-transform duration-300">
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800 dark:text-white mb-2" data-translate="title">üîê Password Strength Checker</h1>
            <p class="text-gray-600 dark:text-gray-300" data-translate="subtitle">Test your password's security level!</p>
        </div>

        <div class="space-y-6">
            <div class="relative">
                <input 
                    type="password" 
                    id="passwordInput"
                    data-translate-placeholder="passwordPlaceholder"
                    placeholder="Enter your password..."
                    class="w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-xl focus:border-purple-500 focus:outline-none transition-colors duration-300 text-lg"
                >
                <button 
                    id="togglePassword"
                    class="absolute right-12 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors"
                >
                    üëÅÔ∏è
                </button>
                <button 
                    id="breachCheck"
                    class="absolute right-3 top-1/2 transform -translate-y-1/2 text-red-500 hover:text-red-700 transition-colors text-sm"
                    title="Check if password has been breached"
                >
                    üîí
                </button>
            </div>

            <!-- Breach Warning -->
            <div id="breachWarning" class="hidden bg-red-100 dark:bg-red-900 border border-red-400 text-red-700 dark:text-red-300 px-4 py-3 rounded-xl">
                <div class="flex items-center">
                    <span class="text-xl mr-2">‚ö†Ô∏è</span>
                    <div>
                        <strong data-translate="breachTitle">Security Alert!</strong>
                        <p class="text-sm" data-translate="breachMessage">This password has been found in data breaches. Please use a different password.</p>
                    </div>
                </div>
            </div>

            <!-- Strength Bar -->
            <div class="space-y-2">
                <div class="flex justify-between items-center">
                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300" data-translate="strengthLevel">Strength Level</span>
                    <span id="strengthText" class="text-sm font-bold dark:text-white" data-translate="enterPassword">Enter password</span>
                </div>
                <div class="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-3">
                    <div id="strengthBar" class="strength-bar h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
                </div>
            </div>

            <!-- Criteria Checklist -->
            <div class="space-y-3">
                <h3 class="font-semibold text-gray-800 dark:text-white text-center" data-translate="securityCriteria">Security Criteria</h3>
                <div class="grid grid-cols-1 gap-2">
                    <div id="lengthCheck" class="flex items-center space-x-2 p-2 rounded-lg transition-all duration-300">
                        <span class="text-xl">‚ùå</span>
                        <span class="text-sm dark:text-gray-300" data-translate="lengthCriteria">At least 8 characters</span>
                    </div>
                    <div id="uppercaseCheck" class="flex items-center space-x-2 p-2 rounded-lg transition-all duration-300">
                        <span class="text-xl">‚ùå</span>
                        <span class="text-sm dark:text-gray-300" data-translate="uppercaseCriteria">Contains uppercase letter</span>
                    </div>
                    <div id="lowercaseCheck" class="flex items-center space-x-2 p-2 rounded-lg transition-all duration-300">
                        <span class="text-xl">‚ùå</span>
                        <span class="text-sm dark:text-gray-300" data-translate="lowercaseCriteria">Contains lowercase letter</span>
                    </div>
                    <div id="numberCheck" class="flex items-center space-x-2 p-2 rounded-lg transition-all duration-300">
                        <span class="text-xl">‚ùå</span>
                        <span class="text-sm dark:text-gray-300" data-translate="numberCriteria">Contains number</span>
                    </div>
                    <div id="specialCheck" class="flex items-center space-x-2 p-2 rounded-lg transition-all duration-300">
                        <span class="text-xl">‚ùå</span>
                        <span class="text-sm dark:text-gray-300" data-translate="specialCriteria">Contains special character</span>
                    </div>
                </div>
            </div>

            <!-- Score Display -->
            <div class="text-center p-4 rounded-xl bg-gray-50 dark:bg-gray-700">
                <div class="text-2xl font-bold text-gray-800 dark:text-white" id="scoreDisplay">0/100</div>
                <div class="text-sm text-gray-600 dark:text-gray-300" data-translate="securityScore">Security Score</div>
            </div>

            <!-- Fun Messages -->
            <div id="messageBox" class="text-center p-3 rounded-xl transition-all duration-300 opacity-0">
                <div id="messageText" class="font-medium"></div>
            </div>

            <!-- Password Generator -->
            <div class="border-t dark:border-gray-600 pt-6 space-y-4">
                <h3 class="font-semibold text-gray-800 dark:text-white text-center" data-translate="passwordGenerator">üé≤ Password Generator</h3>
                <div class="grid grid-cols-2 gap-2 text-sm">
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" id="genUppercase" checked class="rounded">
                        <span class="dark:text-gray-300" data-translate="genUppercase">Uppercase (A-Z)</span>
                    </label>
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" id="genLowercase" checked class="rounded">
                        <span class="dark:text-gray-300" data-translate="genLowercase">Lowercase (a-z)</span>
                    </label>
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" id="genNumbers" checked class="rounded">
                        <span class="dark:text-gray-300" data-translate="genNumbers">Numbers (0-9)</span>
                    </label>
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" id="genSpecial" checked class="rounded">
                        <span class="dark:text-gray-300" data-translate="genSpecial">Symbols (!@#$)</span>
                    </label>
                </div>
                <div class="flex items-center space-x-2">
                    <label class="text-sm font-medium dark:text-gray-300" data-translate="length">Length:</label>
                    <input type="range" id="genLength" min="8" max="32" value="12" class="flex-1">
                    <span id="lengthDisplay" class="text-sm font-bold w-8 dark:text-white">12</span>
                </div>
                <button id="generateBtn" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-3 rounded-xl font-semibold hover:from-purple-600 hover:to-pink-600 transition-all duration-300 transform hover:scale-105" data-translate="generateBtn">
                    Generate Secure Password üöÄ
                </button>
            </div>

            <!-- Password History -->
            <div class="border-t dark:border-gray-600 pt-6 space-y-4">
                <div class="flex justify-between items-center">
                    <h3 class="font-semibold text-gray-800 dark:text-white" data-translate="passwordHistory">üìö Password History</h3>
                    <div class="flex space-x-2">
                        <button id="exportHistory" class="text-xs text-blue-500 hover:text-blue-700 transition-colors" data-translate="export">Export</button>
                        <button id="clearHistory" class="text-xs text-red-500 hover:text-red-700 transition-colors" data-translate="clearAll">Clear All</button>
                    </div>
                </div>
                <div id="passwordHistory" class="space-y-2 max-h-32 overflow-y-auto">
                    <p class="text-sm text-gray-500 dark:text-gray-400 text-center py-4" data-translate="noPasswords">No passwords tested yet</p>
                </div>
            </div>

            <!-- Real-time Tips -->
            <div class="border-t dark:border-gray-600 pt-6 space-y-4">
                <h3 class="font-semibold text-gray-800 dark:text-white text-center" data-translate="smartTips">üí° Smart Tips</h3>
                <div id="tipsContainer" class="bg-blue-50 dark:bg-blue-900 p-4 rounded-xl">
                    <div id="currentTip" class="text-sm text-blue-700 dark:text-blue-300 text-center" data-translate="startTyping">
                        Start typing to get personalized security tips!
                    </div>
                </div>
                <div class="flex justify-center space-x-2">
                    <div class="w-2 h-2 bg-blue-300 rounded-full transition-all duration-300" id="tip1"></div>
                    <div class="w-2 h-2 bg-blue-300 rounded-full transition-all duration-300" id="tip2"></div>
                    <div class="w-2 h-2 bg-blue-300 rounded-full transition-all duration-300" id="tip3"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Analytics Modal -->
    <div id="analyticsModal" class="fixed inset-0 bg-black bg-opacity-50 modal-overlay hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800 dark:text-white" data-translate="analyticsTitle">üìä Password Analytics Dashboard</h2>
                <button id="closeAnalytics" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-2xl">√ó</button>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6">
                <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4 rounded-xl">
                    <div class="text-2xl font-bold" id="totalPasswords">0</div>
                    <div class="text-sm opacity-90" data-translate="totalTested">Total Passwords Tested</div>
                </div>
                <div class="bg-gradient-to-r from-green-500 to-green-600 text-white p-4 rounded-xl">
                    <div class="text-2xl font-bold" id="avgScore">0</div>
                    <div class="text-sm opacity-90" data-translate="avgScore">Average Security Score</div>
                </div>
                <div class="bg-gradient-to-r from-purple-500 to-purple-600 text-white p-4 rounded-xl">
                    <div class="text-2xl font-bold" id="strongPasswords">0</div>
                    <div class="text-sm opacity-90" data-translate="strongPasswords">Strong Passwords (80+)</div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-xl">
                    <h3 class="font-semibold mb-4 text-gray-800 dark:text-white" data-translate="scoreDistribution">Score Distribution</h3>
                    <div class="chart-container">
                        <canvas id="scoreChart" width="300" height="200"></canvas>
                    </div>
                </div>
                <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-xl">
                    <h3 class="font-semibold mb-4 text-gray-800 dark:text-white" data-translate="criteriaStats">Criteria Statistics</h3>
                    <div id="criteriaStats" class="space-y-2"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="fixed inset-0 bg-black bg-opacity-50 modal-overlay hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-2xl">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800 dark:text-white" data-translate="securitySettings">üéØ Security Policy Settings</h2>
                <button id="closeSettings" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-2xl">√ó</button>
            </div>
            
            <div class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-translate="minLength">Minimum Password Length</label>
                    <input type="range" id="minLengthSetting" min="6" max="20" value="8" class="w-full">
                    <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400">
                        <span>6</span>
                        <span id="minLengthValue">8</span>
                        <span>20</span>
                    </div>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" id="requireUppercase" checked class="rounded">
                        <span class="text-sm dark:text-gray-300" data-translate="requireUppercase">Require Uppercase</span>
                    </label>
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" id="requireLowercase" checked class="rounded">
                        <span class="text-sm dark:text-gray-300" data-translate="requireLowercase">Require Lowercase</span>
                    </label>
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" id="requireNumbers" checked class="rounded">
                        <span class="text-sm dark:text-gray-300" data-translate="requireNumbers">Require Numbers</span>
                    </label>
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" id="requireSpecial" checked class="rounded">
                        <span class="text-sm dark:text-gray-300" data-translate="requireSpecial">Require Special Characters</span>
                    </label>
                </div>
                
                <div>
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" id="enableBreachCheck" checked class="rounded">
                        <span class="text-sm dark:text-gray-300" data-translate="enableBreachCheck">Enable Breach Database Checking</span>
                    </label>
                </div>
                
                <button id="saveSettings" class="w-full bg-purple-500 text-white py-2 rounded-lg hover:bg-purple-600 transition-colors" data-translate="saveSettings">
                    Save Settings
                </button>
            </div>
        </div>
    </div>

    <script>
        // Multi-language support
        const translations = {
            en: {
                title: "üîê Password Strength Checker",
                subtitle: "Test your password's security level!",
                passwordPlaceholder: "Enter your password...",
                strengthLevel: "Strength Level",
                enterPassword: "Enter password",
                securityCriteria: "Security Criteria",
                lengthCriteria: "At least 8 characters",
                uppercaseCriteria: "Contains uppercase letter",
                lowercaseCriteria: "Contains lowercase letter",
                numberCriteria: "Contains number",
                specialCriteria: "Contains special character",
                securityScore: "Security Score",
                passwordGenerator: "üé≤ Password Generator",
                genUppercase: "Uppercase (A-Z)",
                genLowercase: "Lowercase (a-z)",
                genNumbers: "Numbers (0-9)",
                genSpecial: "Symbols (!@#$)",
                length: "Length:",
                generateBtn: "Generate Secure Password üöÄ",
                passwordHistory: "üìö Password History",
                export: "Export",
                clearAll: "Clear All",
                noPasswords: "No passwords tested yet",
                smartTips: "üí° Smart Tips",
                startTyping: "Start typing to get personalized security tips!",
                breachTitle: "Security Alert!",
                breachMessage: "This password has been found in data breaches. Please use a different password.",
                analyticsTitle: "üìä Password Analytics Dashboard",
                totalTested: "Total Passwords Tested",
                avgScore: "Average Security Score",
                strongPasswords: "Strong Passwords (80+)",
                scoreDistribution: "Score Distribution",
                criteriaStats: "Criteria Statistics",
                securitySettings: "üéØ Security Policy Settings",
                minLength: "Minimum Password Length",
                requireUppercase: "Require Uppercase",
                requireLowercase: "Require Lowercase",
                requireNumbers: "Require Numbers",
                requireSpecial: "Require Special Characters",
                enableBreachCheck: "Enable Breach Database Checking",
                saveSettings: "Save Settings"
            },
            es: {
                title: "üîê Verificador de Contrase√±as",
                subtitle: "¬°Prueba el nivel de seguridad de tu contrase√±a!",
                passwordPlaceholder: "Ingresa tu contrase√±a...",
                strengthLevel: "Nivel de Fuerza",
                enterPassword: "Ingresa contrase√±a",
                securityCriteria: "Criterios de Seguridad",
                lengthCriteria: "Al menos 8 caracteres",
                uppercaseCriteria: "Contiene letra may√∫scula",
                lowercaseCriteria: "Contiene letra min√∫scula",
                numberCriteria: "Contiene n√∫mero",
                specialCriteria: "Contiene car√°cter especial",
                securityScore: "Puntuaci√≥n de Seguridad",
                passwordGenerator: "üé≤ Generador de Contrase√±as",
                genUppercase: "May√∫sculas (A-Z)",
                genLowercase: "Min√∫sculas (a-z)",
                genNumbers: "N√∫meros (0-9)",
                genSpecial: "S√≠mbolos (!@#$)",
                length: "Longitud:",
                generateBtn: "Generar Contrase√±a Segura üöÄ",
                passwordHistory: "üìö Historial de Contrase√±as",
                export: "Exportar",
                clearAll: "Limpiar Todo",
                noPasswords: "A√∫n no se han probado contrase√±as",
                smartTips: "üí° Consejos Inteligentes",
                startTyping: "¬°Comienza a escribir para obtener consejos de seguridad personalizados!",
                breachTitle: "¬°Alerta de Seguridad!",
                breachMessage: "Esta contrase√±a se ha encontrado en filtraciones de datos. Por favor usa una contrase√±a diferente.",
                analyticsTitle: "üìä Panel de An√°lisis de Contrase√±as",
                totalTested: "Total de Contrase√±as Probadas",
                avgScore: "Puntuaci√≥n Promedio de Seguridad",
                strongPasswords: "Contrase√±as Fuertes (80+)",
                scoreDistribution: "Distribuci√≥n de Puntuaciones",
                criteriaStats: "Estad√≠sticas de Criterios",
                securitySettings: "üéØ Configuraci√≥n de Pol√≠tica de Seguridad",
                minLength: "Longitud M√≠nima de Contrase√±a",
                requireUppercase: "Requerir May√∫sculas",
                requireLowercase: "Requerir Min√∫sculas",
                requireNumbers: "Requerir N√∫meros",
                requireSpecial: "Requerir Caracteres Especiales",
                enableBreachCheck: "Habilitar Verificaci√≥n de Base de Datos de Filtraciones",
                saveSettings: "Guardar Configuraci√≥n"
            },
            fr: {
                title: "üîê V√©rificateur de Force de Mot de Passe",
                subtitle: "Testez le niveau de s√©curit√© de votre mot de passe !",
                passwordPlaceholder: "Entrez votre mot de passe...",
                strengthLevel: "Niveau de Force",
                enterPassword: "Entrez le mot de passe",
                securityCriteria: "Crit√®res de S√©curit√©",
                lengthCriteria: "Au moins 8 caract√®res",
                uppercaseCriteria: "Contient une lettre majuscule",
                lowercaseCriteria: "Contient une lettre minuscule",
                numberCriteria: "Contient un chiffre",
                specialCriteria: "Contient un caract√®re sp√©cial",
                securityScore: "Score de S√©curit√©",
                passwordGenerator: "üé≤ G√©n√©rateur de Mot de Passe",
                genUppercase: "Majuscules (A-Z)",
                genLowercase: "Minuscules (a-z)",
                genNumbers: "Chiffres (0-9)",
                genSpecial: "Symboles (!@#$)",
                length: "Longueur:",
                generateBtn: "G√©n√©rer un Mot de Passe S√©curis√© üöÄ",
                passwordHistory: "üìö Historique des Mots de Passe",
                export: "Exporter",
                clearAll: "Tout Effacer",
                noPasswords: "Aucun mot de passe test√© pour le moment",
                smartTips: "üí° Conseils Intelligents",
                startTyping: "Commencez √† taper pour obtenir des conseils de s√©curit√© personnalis√©s !",
                breachTitle: "Alerte de S√©curit√© !",
                breachMessage: "Ce mot de passe a √©t√© trouv√© dans des fuites de donn√©es. Veuillez utiliser un mot de passe diff√©rent.",
                analyticsTitle: "üìä Tableau de Bord d'Analyse des Mots de Passe",
                totalTested: "Total des Mots de Passe Test√©s",
                avgScore: "Score de S√©curit√© Moyen",
                strongPasswords: "Mots de Passe Forts (80+)",
                scoreDistribution: "Distribution des Scores",
                criteriaStats: "Statistiques des Crit√®res",
                securitySettings: "üéØ Param√®tres de Politique de S√©curit√©",
                minLength: "Longueur Minimale du Mot de Passe",
                requireUppercase: "Exiger des Majuscules",
                requireLowercase: "Exiger des Minuscules",
                requireNumbers: "Exiger des Chiffres",
                requireSpecial: "Exiger des Caract√®res Sp√©ciaux",
                enableBreachCheck: "Activer la V√©rification de Base de Donn√©es de Fuites",
                saveSettings: "Sauvegarder les Param√®tres"
            },
            de: {
                title: "üîê Passwort-St√§rke-Pr√ºfer",
                subtitle: "Testen Sie das Sicherheitsniveau Ihres Passworts!",
                passwordPlaceholder: "Geben Sie Ihr Passwort ein...",
                strengthLevel: "St√§rke-Level",
                enterPassword: "Passwort eingeben",
                securityCriteria: "Sicherheitskriterien",
                lengthCriteria: "Mindestens 8 Zeichen",
                uppercaseCriteria: "Enth√§lt Gro√übuchstaben",
                lowercaseCriteria: "Enth√§lt Kleinbuchstaben",
                numberCriteria: "Enth√§lt Zahl",
                specialCriteria: "Enth√§lt Sonderzeichen",
                securityScore: "Sicherheitsbewertung",
                passwordGenerator: "üé≤ Passwort-Generator",
                genUppercase: "Gro√übuchstaben (A-Z)",
                genLowercase: "Kleinbuchstaben (a-z)",
                genNumbers: "Zahlen (0-9)",
                genSpecial: "Symbole (!@#$)",
                length: "L√§nge:",
                generateBtn: "Sicheres Passwort Generieren üöÄ",
                passwordHistory: "üìö Passwort-Verlauf",
                export: "Exportieren",
                clearAll: "Alles L√∂schen",
                noPasswords: "Noch keine Passw√∂rter getestet",
                smartTips: "üí° Intelligente Tipps",
                startTyping: "Beginnen Sie zu tippen, um personalisierte Sicherheitstipps zu erhalten!",
                breachTitle: "Sicherheitswarnung!",
                breachMessage: "Dieses Passwort wurde in Datenlecks gefunden. Bitte verwenden Sie ein anderes Passwort.",
                analyticsTitle: "üìä Passwort-Analyse-Dashboard",
                totalTested: "Gesamt Getestete Passw√∂rter",
                avgScore: "Durchschnittliche Sicherheitsbewertung",
                strongPasswords: "Starke Passw√∂rter (80+)",
                scoreDistribution: "Score-Verteilung",
                criteriaStats: "Kriterien-Statistiken",
                securitySettings: "üéØ Sicherheitsrichtlinien-Einstellungen",
                minLength: "Minimale Passwort-L√§nge",
                requireUppercase: "Gro√übuchstaben Erforderlich",
                requireLowercase: "Kleinbuchstaben Erforderlich",
                requireNumbers: "Zahlen Erforderlich",
                requireSpecial: "Sonderzeichen Erforderlich",
                enableBreachCheck: "Datenleck-Datenbank-Pr√ºfung Aktivieren",
                saveSettings: "Einstellungen Speichern"
            }
        };

        // Global variables
        const passwordInput = document.getElementById('passwordInput');
        const togglePassword = document.getElementById('togglePassword');
        const strengthBar = document.getElementById('strengthBar');
        const strengthText = document.getElementById('strengthText');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const messageBox = document.getElementById('messageBox');
        const messageText = document.getElementById('messageText');
        const themeToggle = document.getElementById('themeToggle');
        const languageSelect = document.getElementById('languageSelect');
        const analyticsBtn = document.getElementById('analyticsBtn');
        const settingsBtn = document.getElementById('settingsBtn');
        const breachCheck = document.getElementById('breachCheck');
        const breachWarning = document.getElementById('breachWarning');

        let currentLanguage = 'en';
        let isDarkMode = false;
        let passwordAnalytics = JSON.parse(localStorage.getItem('passwordAnalytics')) || {
            totalTested: 0,
            scores: [],
            criteriaStats: {
                length: 0,
                uppercase: 0,
                lowercase: 0,
                number: 0,
                special: 0
            }
        };

        let securitySettings = JSON.parse(localStorage.getItem('securitySettings')) || {
            minLength: 8,
            requireUppercase: true,
            requireLowercase: true,
            requireNumbers: true,
            requireSpecial: true,
            enableBreachCheck: true
        };

        const checks = {
            length: document.getElementById('lengthCheck'),
            uppercase: document.getElementById('uppercaseCheck'),
            lowercase: document.getElementById('lowercaseCheck'),
            number: document.getElementById('numberCheck'),
            special: document.getElementById('specialCheck')
        };

        const messages = {
            0: { text: "ü§î Start typing to see the magic!", color: "bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300" },
            20: { text: "üò¨ This password needs serious help!", color: "bg-red-100 text-red-600 dark:bg-red-900 dark:text-red-300" },
            40: { text: "üòê Getting warmer, but still weak!", color: "bg-orange-100 text-orange-600 dark:bg-orange-900 dark:text-orange-300" },
            60: { text: "üôÇ Not bad, but could be stronger!", color: "bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-300" },
            80: { text: "üòä Great job! Very secure password!", color: "bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-300" },
            100: { text: "üéâ AMAZING! Fort Knox level security!", color: "bg-emerald-100 text-emerald-600 dark:bg-emerald-900 dark:text-emerald-300" }
        };

        // New feature elements
        const generateBtn = document.getElementById('generateBtn');
        const genLength = document.getElementById('genLength');
        const lengthDisplay = document.getElementById('lengthDisplay');
        const passwordHistory = document.getElementById('passwordHistory');
        const clearHistory = document.getElementById('clearHistory');
        const exportHistory = document.getElementById('exportHistory');
        const currentTip = document.getElementById('currentTip');
        
        let historyCount = 0;
        let currentTipIndex = 0;
        
        const securityTips = [
            "üí° Longer passwords are exponentially harder to crack!",
            "üîí Mix uppercase, lowercase, numbers, and symbols for maximum security.",
            "üö´ Avoid using personal information like birthdays or names.",
            "üîÑ Use different passwords for different accounts.",
            "üì± Consider using a password manager for convenience.",
            "‚è∞ Change passwords regularly, especially for important accounts.",
            "üéØ Passphrases with random words can be both secure and memorable.",
            "üåê Enable two-factor authentication whenever possible."
        ];

        // Common breached passwords (simplified simulation)
        const commonBreachedPasswords = [
            'password', '123456', 'password123', 'admin', 'qwerty', 'letmein',
            'welcome', 'monkey', '1234567890', 'abc123', 'Password1', 'password1'
        ];

        // Initialize app
        function initializeApp() {
            loadTheme();
            loadLanguage();
            loadSettings();
            setupEventListeners();
            updateAnalyticsDisplay();
            
            // Register service worker for PWA
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('data:text/javascript;base64,c2VsZi5hZGRFdmVudExpc3RlbmVyKCdpbnN0YWxsJywgZXZlbnQgPT4geyBjb25zb2xlLmxvZygnU1cgaW5zdGFsbGVkJyk7IH0pOw==');
            }
        }

        function setupEventListeners() {
            // Theme toggle
            themeToggle.addEventListener('click', toggleTheme);
            
            // Language selector
            languageSelect.addEventListener('change', (e) => {
                currentLanguage = e.target.value;
                localStorage.setItem('language', currentLanguage);
                updateLanguage();
            });

            // Analytics modal
            analyticsBtn.addEventListener('click', showAnalytics);
            document.getElementById('closeAnalytics').addEventListener('click', hideAnalytics);

            // Settings modal
            settingsBtn.addEventListener('click', showSettings);
            document.getElementById('closeSettings').addEventListener('click', hideSettings);
            document.getElementById('saveSettings').addEventListener('click', saveSettings);

            // Breach check
            breachCheck.addEventListener('click', checkPasswordBreach);

            // Password input
            togglePassword.addEventListener('click', () => {
                const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                passwordInput.setAttribute('type', type);
                togglePassword.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üôà';
            });

            passwordInput.addEventListener('input', checkPasswordStrength);
            
            // Password Generator Event Listeners
            generateBtn.addEventListener('click', generatePassword);
            genLength.addEventListener('input', () => {
                lengthDisplay.textContent = genLength.value;
            });
            
            // History management
            clearHistory.addEventListener('click', () => {
                passwordHistory.innerHTML = '<p class="text-sm text-gray-500 dark:text-gray-400 text-center py-4" data-translate="noPasswords">No passwords tested yet</p>';
                historyCount = 0;
                updateLanguage();
            });

            exportHistory.addEventListener('click', exportPasswordHistory);

            // Settings sliders
            document.getElementById('minLengthSetting').addEventListener('input', (e) => {
                document.getElementById('minLengthValue').textContent = e.target.value;
            });
        }

        function toggleTheme() {
            isDarkMode = !isDarkMode;
            document.documentElement.classList.toggle('dark', isDarkMode);
            themeToggle.textContent = isDarkMode ? '‚òÄÔ∏è' : 'üåô';
            localStorage.setItem('darkMode', isDarkMode);
        }

        function loadTheme() {
            isDarkMode = localStorage.getItem('darkMode') === 'true';
            document.documentElement.classList.toggle('dark', isDarkMode);
            themeToggle.textContent = isDarkMode ? '‚òÄÔ∏è' : 'üåô';
        }

        function loadLanguage() {
            const savedLanguage = localStorage.getItem('language');
            if (savedLanguage && translations[savedLanguage]) {
                currentLanguage = savedLanguage;
                languageSelect.value = currentLanguage;
                updateLanguage();
            }
        }

        function updateLanguage() {
            const elements = document.querySelectorAll('[data-translate]');
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    if (element.hasAttribute('data-translate-placeholder')) {
                        element.placeholder = translations[currentLanguage][key];
                    } else {
                        element.textContent = translations[currentLanguage][key];
                    }
                }
            });

            // Update placeholder specifically
            const placeholder = document.querySelector('[data-translate-placeholder]');
            if (placeholder && translations[currentLanguage].passwordPlaceholder) {
                placeholder.placeholder = translations[currentLanguage].passwordPlaceholder;
            }
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification slide-in p-4 rounded-lg shadow-lg ${
                type === 'success' ? 'bg-green-500 text-white' :
                type === 'error' ? 'bg-red-500 text-white' :
                type === 'warning' ? 'bg-yellow-500 text-black' :
                'bg-blue-500 text-white'
            }`;
            notification.textContent = message;
            
            document.getElementById('notificationArea').appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        function checkPasswordBreach() {
            const password = passwordInput.value.toLowerCase();
            if (!password) return;

            if (!securitySettings.enableBreachCheck) {
                showNotification('Breach checking is disabled in settings', 'info');
                return;
            }

            // Simulate breach check (in real app, this would call HaveIBeenPwned API)
            const isBreached = commonBreachedPasswords.includes(password);
            
            if (isBreached) {
                breachWarning.classList.remove('hidden');
                showNotification('‚ö†Ô∏è Password found in breach database!', 'error');
            } else {
                breachWarning.classList.add('hidden');
                showNotification('‚úÖ Password not found in known breaches', 'success');
            }
        }

        function generatePassword() {
            const length = parseInt(genLength.value);
            const useUppercase = document.getElementById('genUppercase').checked;
            const useLowercase = document.getElementById('genLowercase').checked;
            const useNumbers = document.getElementById('genNumbers').checked;
            const useSpecial = document.getElementById('genSpecial').checked;
            
            let charset = '';
            if (useUppercase) charset += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            if (useLowercase) charset += 'abcdefghijklmnopqrstuvwxyz';
            if (useNumbers) charset += '0123456789';
            if (useSpecial) charset += '!@#$%^&*()_+-=[]{}|;:,.<>?';
            
            if (charset === '') {
                showNotification('Please select at least one character type!', 'warning');
                return;
            }
            
            let password = '';
            for (let i = 0; i < length; i++) {
                password += charset.charAt(Math.floor(Math.random() * charset.length));
            }
            
            passwordInput.value = password;
            passwordInput.type = 'text';
            togglePassword.textContent = 'üôà';
            
            // Add sparkle effect to generate button
            generateBtn.classList.add('pulse');
            setTimeout(() => generateBtn.classList.remove('pulse'), 1000);
            
            checkPasswordStrength();
            showNotification('üéâ Secure password generated!', 'success');
        }

        function addToHistory(password, score, strength) {
            if (historyCount >= 5) {
                const firstItem = passwordHistory.querySelector('.history-item');
                if (firstItem) firstItem.remove();
            } else {
                // Remove "no passwords" message
                const noPasswordsMsg = passwordHistory.querySelector('p');
                if (noPasswordsMsg) noPasswordsMsg.remove();
                historyCount++;
            }
            
            const historyItem = document.createElement('div');
            historyItem.className = 'history-item flex justify-between items-center p-2 bg-gray-50 dark:bg-gray-700 rounded-lg text-sm fade-in';
            historyItem.innerHTML = `
                <span class="font-mono text-xs truncate flex-1 dark:text-gray-300">${password.substring(0, 12)}${password.length > 12 ? '...' : ''}</span>
                <span class="text-xs font-bold ${getScoreColor(score)}">${score}/100</span>
            `;
            passwordHistory.appendChild(historyItem);

            // Update analytics
            passwordAnalytics.totalTested++;
            passwordAnalytics.scores.push(score);
            if (passwordAnalytics.scores.length > 100) {
                passwordAnalytics.scores.shift(); // Keep only last 100 scores
            }
            localStorage.setItem('passwordAnalytics', JSON.stringify(passwordAnalytics));
        }

        function exportPasswordHistory() {
            const historyItems = document.querySelectorAll('.history-item');
            if (historyItems.length === 0) {
                showNotification('No password history to export', 'warning');
                return;
            }

            let csvContent = "Password,Score,Timestamp\n";
            historyItems.forEach(item => {
                const password = item.querySelector('.font-mono').textContent;
                const score = item.querySelector('.font-bold').textContent;
                const timestamp = new Date().toISOString();
                csvContent += `"${password}","${score}","${timestamp}"\n`;
            });

            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'password_history.csv';
            a.click();
            window.URL.revokeObjectURL(url);
            
            showNotification('üìÑ Password history exported!', 'success');
        }

        function getScoreColor(score) {
            if (score < 40) return 'text-red-500';
            if (score < 60) return 'text-orange-500';
            if (score < 80) return 'text-yellow-500';
            return 'text-green-500';
        }

        function showPersonalizedTip(password, score) {
            let tip = securityTips[0]; // default tip
            
            if (password.length === 0) {
                tip = translations[currentLanguage].startTyping;
            } else if (password.length < securitySettings.minLength) {
                tip = `üî¢ Try making your password at least ${securitySettings.minLength} characters long!`;
            } else if (securitySettings.requireUppercase && !/[A-Z]/.test(password)) {
                tip = "üî† Add some uppercase letters to boost security!";
            } else if (securitySettings.requireNumbers && !/[0-9]/.test(password)) {
                tip = "üî¢ Including numbers makes passwords much stronger!";
            } else if (securitySettings.requireSpecial && !/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password)) {
                tip = "üéØ Special characters like !@#$ add extra protection!";
            } else if (score === 100) {
                tip = "üèÜ Perfect! This password is incredibly secure!";
            } else {
                tip = securityTips[currentTipIndex % securityTips.length];
                currentTipIndex++;
            }
            
            currentTip.textContent = tip;
            
            // Update tip indicators
            const indicators = ['tip1', 'tip2', 'tip3'];
            indicators.forEach((id, index) => {
                const indicator = document.getElementById(id);
                if (index === currentTipIndex % 3) {
                    indicator.className = 'w-2 h-2 bg-blue-500 rounded-full transition-all duration-300';
                } else {
                    indicator.className = 'w-2 h-2 bg-blue-300 rounded-full transition-all duration-300';
                }
            });
        }

        function checkPasswordStrength() {
            const password = passwordInput.value;
            let score = 0;
            let passedChecks = 0;
            const criteriaResults = {
                length: false,
                uppercase: false,
                lowercase: false,
                number: false,
                special: false
            };

            // Reset all checks
            Object.values(checks).forEach(check => {
                check.classList.remove('bg-green-100', 'dark:bg-green-900', 'bounce');
                check.querySelector('span').textContent = '‚ùå';
            });

            // Hide breach warning
            breachWarning.classList.add('hidden');

            if (password.length === 0) {
                updateDisplay(0, translations[currentLanguage].enterPassword, 'bg-gray-300');
                showMessage(0);
                showPersonalizedTip('', 0);
                return;
            }

            // Length check
            if (password.length >= securitySettings.minLength) {
                updateCheck('length', true);
                criteriaResults.length = true;
                score += 20;
                passedChecks++;
            }

            // Uppercase check
            if (!securitySettings.requireUppercase || /[A-Z]/.test(password)) {
                if (/[A-Z]/.test(password)) {
                    updateCheck('uppercase', true);
                    criteriaResults.uppercase = true;
                    score += 20;
                    passedChecks++;
                } else if (!securitySettings.requireUppercase) {
                    score += 20;
                    passedChecks++;
                }
            }

            // Lowercase check
            if (!securitySettings.requireLowercase || /[a-z]/.test(password)) {
                if (/[a-z]/.test(password)) {
                    updateCheck('lowercase', true);
                    criteriaResults.lowercase = true;
                    score += 20;
                    passedChecks++;
                } else if (!securitySettings.requireLowercase) {
                    score += 20;
                    passedChecks++;
                }
            }

            // Number check
            if (!securitySettings.requireNumbers || /\d/.test(password)) {
                if (/\d/.test(password)) {
                    updateCheck('number', true);
                    criteriaResults.number = true;
                    score += 20;
                    passedChecks++;
                } else if (!securitySettings.requireNumbers) {
                    score += 20;
                    passedChecks++;
                }
            }

            // Special character check
            if (!securitySettings.requireSpecial || /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password)) {
                if (/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password)) {
                    updateCheck('special', true);
                    criteriaResults.special = true;
                    score += 20;
                    passedChecks++;
                } else if (!securitySettings.requireSpecial) {
                    score += 20;
                    passedChecks++;
                }
            }

            // Update analytics
            Object.keys(criteriaResults).forEach(key => {
                if (criteriaResults[key]) {
                    passwordAnalytics.criteriaStats[key]++;
                }
            });

            // Determine strength level and color
            let strengthLevel, barColor;
            if (score < 40) {
                strengthLevel = 'Very Weak';
                barColor = 'bg-red-500';
                passwordInput.classList.add('shake');
                setTimeout(() => passwordInput.classList.remove('shake'), 500);
            } else if (score < 60) {
                strengthLevel = 'Weak';
                barColor = 'bg-orange-500';
            } else if (score < 80) {
                strengthLevel = 'Good';
                barColor = 'bg-yellow-500';
            } else if (score < 100) {
                strengthLevel = 'Strong';
                barColor = 'bg-green-500';
            } else {
                strengthLevel = 'Very Strong';
                barColor = 'bg-emerald-500';
                strengthBar.classList.add('pulse');
                setTimeout(() => strengthBar.classList.remove('pulse'), 2000);
            }

            updateDisplay(score, strengthLevel, barColor);
            showMessage(score);
            showPersonalizedTip(password, score);
            
            // Add to history if password is complete (has some strength)
            if (password.length > 0 && score >= 20) {
                addToHistory(password, score, strengthLevel);
            }

            // Auto-check for breaches if enabled
            if (securitySettings.enableBreachCheck && password.length >= 6) {
                setTimeout(() => checkPasswordBreach(), 500);
            }
        }

        function updateCheck(checkType, passed) {
            const checkElement = checks[checkType];
            if (passed) {
                checkElement.classList.add('bg-green-100', 'dark:bg-green-900', 'bounce');
                checkElement.querySelector('span').textContent = '‚úÖ';
                setTimeout(() => checkElement.classList.remove('bounce'), 600);
            }
        }

        function updateDisplay(score, strengthLevel, barColor) {
            strengthBar.style.width = score + '%';
            strengthBar.className = `strength-bar h-3 rounded-full transition-all duration-500 ${barColor}`;
            strengthText.textContent = strengthLevel;
            scoreDisplay.textContent = `${score}/100`;
        }

        function showMessage(score) {
            const messageKey = Object.keys(messages).reverse().find(key => score >= key);
            const message = messages[messageKey];
            
            messageText.textContent = message.text;
            messageBox.className = `text-center p-3 rounded-xl transition-all duration-300 ${message.color}`;
            messageBox.style.opacity = '1';
        }

        function showAnalytics() {
            document.getElementById('analyticsModal').classList.remove('hidden');
            updateAnalyticsDisplay();
            drawScoreChart();
        }

        function hideAnalytics() {
            document.getElementById('analyticsModal').classList.add('hidden');
        }

        function updateAnalyticsDisplay() {
            document.getElementById('totalPasswords').textContent = passwordAnalytics.totalTested;
            
            const avgScore = passwordAnalytics.scores.length > 0 
                ? Math.round(passwordAnalytics.scores.reduce((a, b) => a + b, 0) / passwordAnalytics.scores.length)
                : 0;
            document.getElementById('avgScore').textContent = avgScore;
            
            const strongPasswords = passwordAnalytics.scores.filter(score => score >= 80).length;
            document.getElementById('strongPasswords').textContent = strongPasswords;

            // Update criteria stats
            const criteriaStatsDiv = document.getElementById('criteriaStats');
            criteriaStatsDiv.innerHTML = '';
            Object.entries(passwordAnalytics.criteriaStats).forEach(([criteria, count]) => {
                const percentage = passwordAnalytics.totalTested > 0 
                    ? Math.round((count / passwordAnalytics.totalTested) * 100)
                    : 0;
                
                const statDiv = document.createElement('div');
                statDiv.className = 'flex justify-between items-center p-2 bg-white dark:bg-gray-600 rounded';
                statDiv.innerHTML = `
                    <span class="capitalize dark:text-white">${criteria}</span>
                    <span class="font-bold text-purple-600 dark:text-purple-400">${percentage}%</span>
                `;
                criteriaStatsDiv.appendChild(statDiv);
            });
        }

        function drawScoreChart() {
            const canvas = document.getElementById('scoreChart');
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            if (passwordAnalytics.scores.length === 0) {
                ctx.fillStyle = isDarkMode ? '#9CA3AF' : '#6B7280';
                ctx.font = '16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('No data available', canvas.width / 2, canvas.height / 2);
                return;
            }

            // Create score distribution
            const scoreRanges = [0, 20, 40, 60, 80, 100];
            const distribution = new Array(5).fill(0);
            
            passwordAnalytics.scores.forEach(score => {
                if (score < 20) distribution[0]++;
                else if (score < 40) distribution[1]++;
                else if (score < 60) distribution[2]++;
                else if (score < 80) distribution[3]++;
                else distribution[4]++;
            });

            // Draw bars
            const barWidth = canvas.width / 5;
            const maxHeight = Math.max(...distribution) || 1;
            const colors = ['#EF4444', '#F97316', '#EAB308', '#22C55E', '#10B981'];
            
            distribution.forEach((count, index) => {
                const barHeight = (count / maxHeight) * (canvas.height - 40);
                const x = index * barWidth;
                const y = canvas.height - barHeight - 20;
                
                ctx.fillStyle = colors[index];
                ctx.fillRect(x + 10, y, barWidth - 20, barHeight);
                
                // Draw labels
                ctx.fillStyle = isDarkMode ? '#F3F4F6' : '#374151';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(count.toString(), x + barWidth / 2, y - 5);
                ctx.fillText(`${scoreRanges[index]}-${scoreRanges[index + 1]}`, x + barWidth / 2, canvas.height - 5);
            });
        }

        function showSettings() {
            document.getElementById('settingsModal').classList.remove('hidden');
            loadSettingsUI();
        }

        function hideSettings() {
            document.getElementById('settingsModal').classList.add('hidden');
        }

        function loadSettingsUI() {
            document.getElementById('minLengthSetting').value = securitySettings.minLength;
            document.getElementById('minLengthValue').textContent = securitySettings.minLength;
            document.getElementById('requireUppercase').checked = securitySettings.requireUppercase;
            document.getElementById('requireLowercase').checked = securitySettings.requireLowercase;
            document.getElementById('requireNumbers').checked = securitySettings.requireNumbers;
            document.getElementById('requireSpecial').checked = securitySettings.requireSpecial;
            document.getElementById('enableBreachCheck').checked = securitySettings.enableBreachCheck;
        }

        function saveSettings() {
            securitySettings = {
                minLength: parseInt(document.getElementById('minLengthSetting').value),
                requireUppercase: document.getElementById('requireUppercase').checked,
                requireLowercase: document.getElementById('requireLowercase').checked,
                requireNumbers: document.getElementById('requireNumbers').checked,
                requireSpecial: document.getElementById('requireSpecial').checked,
                enableBreachCheck: document.getElementById('enableBreachCheck').checked
            };
            
            localStorage.setItem('securitySettings', JSON.stringify(securitySettings));
            hideSettings();
            showNotification('‚öôÔ∏è Security settings saved!', 'success');
            
            // Update criteria display
            updateCriteriaDisplay();
        }

        function loadSettings() {
            const saved = localStorage.getItem('securitySettings');
            if (saved) {
                securitySettings = JSON.parse(saved);
            }
            updateCriteriaDisplay();
        }

        function updateCriteriaDisplay() {
            const lengthCriteria = document.querySelector('[data-translate="lengthCriteria"]');
            if (lengthCriteria) {
                lengthCriteria.textContent = `At least ${securitySettings.minLength} characters`;
            }
        }

        // Initialize the app
        initializeApp();
        
        // Initialize display
        showMessage(0);
        showPersonalizedTip('', 0);
        updateLanguage();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97e93915a5034853',t:'MTc1Nzc4MzA1OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
